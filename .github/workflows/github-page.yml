name: Deploy page # actionçš„åå­—ï¼Œä¼šæ˜¾ç¤ºåœ¨github Actionsçš„All workflowsä¸‹é¢

on: # è§¦å‘æ¡ä»¶
  push: # pushä»£ç æ—¶
    branches: # è§¦å‘pushçš„åˆ†æ”¯
      - master # å¯ä»¥ä¿®æ”¹æˆä½ è‡ªå·±æƒ³æ„å»ºçš„åˆ†æ”¯

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest # è·‘è„šæœ¬çš„æœºå™¨
    steps: # æ­¥éª¤
      - name: Checkout ğŸ›ï¸ # ç¬¬ä¸€æ­¥ æ‹‰ä»£ç 
        uses: actions/checkout@v2 # æ‹‰ä»£ç çš„æ’ä»¶
        with:
          persist-credentials: false

      - name: Install and Build ğŸ”§ # ç¬¬äºŒæ­¥ï¼Œè£…nodeåŒ…ï¼Œæ„å»º
        run: |
          npm install --global yarn
          yarn install
          CI=false && yarn build  # ä½ è‡ªå·±é¡¹ç›®çš„æ„å»ºå‘½ä»¤
          cp build/index.html build/404.html # é˜²æ­¢404è·³è½¬githubçš„404

      - name: Deploy ğŸš€ # éƒ¨ç½²
        id: "deploy"
        uses: JamesIves/github-pages-deploy-action@releases/v3 # éƒ¨ç½²åˆ°githubçš„é™æ€é¡µï¼Œä¼šå°†æ‰“åŒ…åçš„æ–‡ä»¶æ¨é€è‡³ä¸‹é¢å¡«å†™çš„åˆ†æ”¯ï¼Œå¯ä»¥ç›´æ¥æ–°å¼€ä¸€ä¸ªåˆ†æ”¯ç”¨æ¥æ”¾æ‰“åŒ…åçš„æ–‡ä»¶
        with:
          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
          BRANCH: gh-pages # ç¼–è¯‘æ–‡ä»¶åˆ†æ”¯
          FOLDER: build # ç¼–è¯‘æ–‡ä»¶çš„æ–‡ä»¶å¤¹
